<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <style>
  </style>
  <script src="http://d3js.org/d3.v3.min.js" charset="utf-8"></script>
</head>
<body>
  <script>
  /*var data = [{"x": 100.0, "y": 100.1}, {"x": 200.0, "y": 200.5}];*/

  var CHART_WIDTH = 500,
      CHART_HEIGHT = 300;
  var chart_area = d3
    .select('body')
    .append('svg')
    .attr('class', 'chart_area') 
    .attr('width', CHART_WIDTH)   
    .attr('height', CHART_HEIGHT)  
  ;

  var data1 = [7, 1, 2, 3];
  var data2 = [7, 1, 4, 6, 5];

  var RADIUS = 50;
  var tmp = {'cnt': 0, 'a': []};


  function compareArrays(arr1, arr2){
    arr1.sort();
    arr2.sort();
    
    arr1.forEach(function(entry) {
        arr2.forEach(function(entry2){
          if (entry == entry2) {tmp['a'].push(entry); tmp.cnt++;}
        });

    });

    return tmp;
  }

  compareArrays(data1, data2);
  var X_CORD = 100, Y_CORD = 100, L = 100;
  var ANIM_DELAY = 400;
  var cords = [{"x": X_CORD, "y": Y_CORD, "delta": 1, "color": "#fdb462", "label": "a"}, {"x": X_CORD+L, "y": Y_CORD, "delta": tmp['cnt']*20, "color": "#d9d9d9", "label": "b"}];

  var circle = chart_area.selectAll('circle')
    .data(cords);
  circle.exit().remove();
  circle.enter().append('circle').attr('r', RADIUS);
  circle
    .attr("cx", X_CORD) // Исходная ширина элемента до начала анимации
    .transition()
    .duration(ANIM_DELAY)
    .attr("cx", function(d) { return d.x-d.delta; })
    .attr("cy", function(d) { return d.y; })
    .attr("fill", function(d) { return d.color; });

  circle.enter().append('text')
  .attr("transform", function(d){return "translate("+(d.x-RADIUS-d.delta+20)+","+(d.y-RADIUS+30)+")"})
  .style('text-anchor', 'middle') // Выравнивание текста по центру
  .text(function(d) { return d.label; }) // Значение из исходного массива
;


  </script>
</body>
</html>
